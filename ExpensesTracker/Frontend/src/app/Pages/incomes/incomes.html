<div class="flex-1 w-full h-full flex justify-center bg-[#EEEEEE]">
  <div class="w-full h-[420px] bg-[#EEEEEE] p-4 flex flex-col">
    <!-- Headline -->
    <h2 class="text-xl font-bold text-gray-800 mb-4 ml-2">Incomes List</h2>

    <!-- Container -->
    <div class="flex flex-col gap-4 mb-4">
      <div class="flex flex-col space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
          <!-- Start Date -->
          <div class="flex flex-col">
            <label class="font-semibold text-sm text-gray-600 mb-1"
              >Start Date</label
            >
            <input
              type="date"
              class="rounded-lg bg-gray-100 p-2 border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:outline-none transition"
              [(ngModel)]="filters.startDate"
            />
          </div>

          <!-- End Date -->
          <div class="flex flex-col">
            <label class="font-semibold text-sm text-gray-600 mb-1"
              >End Date</label
            >
            <input
              type="date"
              [(ngModel)]="filters.endDate"
              class="rounded-lg bg-gray-100 p-2 border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:outline-none transition"
            />
          </div>

          <!-- Min Price -->
          <div class="flex flex-col">
            <label class="font-semibold text-sm text-gray-600 mb-1"
              >Min Price</label
            >
            <input
              type="number"
              class="rounded-lg bg-gray-100 p-2 border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:outline-none transition"
              placeholder="‚Çπ"
              [(ngModel)]="filters.minAmount"
            />
          </div>

          <!-- Max Price -->
          <div class="flex flex-col">
            <label class="font-semibold text-sm text-gray-600 mb-1"
              >Max Price</label
            >
            <input
              type="number"
              class="rounded-lg bg-gray-100 p-2 border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:outline-none transition"
              placeholder="‚Çπ"
              [(ngModel)]="filters.maxAmount"
            />
          </div>
        </div>

        <!-- Search and Apply -->
        <div
          class="flex flex-col md:flex-row items-center justify-center gap-4"
        >
          <!-- Search -->
          <div class="relative w-full md:w-1/2">
            <input
              type="text"
              placeholder="Search transaction..."
              [(ngModel)]="filters.title"
              class="w-full rounded-lg bg-gray-100 p-2 pl-10 border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:outline-none transition"
            />
            <span class="absolute left-3 top-2.5 text-gray-400 text-sm"
              >üîç</span
            >
          </div>

          <!-- Apply -->
          <button
            class="px-6 py-2 rounded-lg bg-purple-600 text-white font-semibold shadow-md cursor-pointer hover:bg-purple-700 hover:shadow-lg focus:ring-2 focus:ring-purple-500 focus:outline-none transition"
            (click)="loadIncome()"
          >
            Apply Filters
          </button>
        </div>
      </div>

      <!-- Transaction List -->
      <div
        class="flex-1 overflow-y-scroll max-h-[250px] flex flex-col gap-2 pr-1"
        (deleteEvent)="confirmDeleteIncome($event)"
      >
        @for(m of income ; track m){
        <app-trasnsaction-card
          [transactions]="m"
          (deleteEvent)="confirmDeleteIncome($event)"
          (editEvent)="confirmEditIncome($event)"
        ></app-trasnsaction-card>
        }
      </div>

      <!-- Adding new Transactions: -->

      <div class="w-full flex justify-center">
        <button
          class="px-6 py-2 rounded-md shadow-md bg-purple-700 hover:bg-purple-800 transition focus:ring-2 focus:ring-purple-500 cursor-pointer text-white font-semibold"
          (click)="openForm()"
        >
          + New Expense
        </button>
      </div>
    </div>
  </div>

  <!-- Overlay Modal -->
  @if(newIncomeForm){
  <div
    class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm"
  >
    <!-- Form Container -->
    <div
      class="bg-white w-[90%] max-w-lg rounded-2xl shadow-xl p-6 relative animate-fadeIn"
    >
      <!-- Close Button -->
      <button
        class="absolute top-3 right-3 text-gray-500 hover:text-gray-700"
        (click)="closeForm()"
      >
        ‚úñ
      </button>

      <!-- Form -->
      <form
        #IncomeForm="ngForm"
        (ngSubmit)="AddNewIncome(IncomeForm.value)"
        class="flex flex-col gap-4"
      >
        <h3 class="text-2xl font-bold text-gray-800 mb-2">Add Expense</h3>

        <!-- Title -->
        <div class="flex flex-col">
          <label for="title" class="font-semibold text-sm text-gray-600"
            >Title</label
          >
          <input
            type="text"
            name="Title"
            ngModel
            placeholder="Enter Title"
            required
            class="rounded-lg border border-gray-300 p-2 focus:ring-2 focus:ring-purple-500 focus:outline-none"
          />
        </div>

        <!-- Amount -->
        <div class="flex flex-col">
          <label for="amount" class="font-semibold text-sm text-gray-600"
            >Amount</label
          >
          <input
            type="number"
            name="Amount"
            ngModel
            placeholder="Enter Amount"
            required
            class="rounded-lg border border-gray-300 p-2 focus:ring-2 focus:ring-purple-500 focus:outline-none"
          />
        </div>

        <div class="flex flex-col">
          <label for="description" class="font-semibold text-sm text-gray-600"
            >description</label
          >
          <input
            type="text"
            name="Description"
            ngModel
            placeholder="Enter description"
            required
            class="rounded-lg border border-gray-300 p-2 focus:ring-2 focus:ring-purple-500 focus:outline-none"
          />
        </div>
        <!-- Submit -->
        <button
          type="submit"
          class="w-full py-2 rounded-lg bg-purple-600 hover:bg-purple-700 transition text-white font-semibold shadow-md focus:ring-2 focus:ring-purple-500"
        >
          Save Expense
        </button>
      </form>
    </div>
  </div>
  } @if(incomeToDelete){
  <div
    class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm"
  >
    <div
      class="bg-white rounded-xl p-6 w-[90%] max-w-md flex flex-col items-center gap-6 shadow-lg animate-fadeIn"
    >
      <h1 class="text-2xl text-center font-semibold text-gray-800">
        Are you sure you want to delete
      </h1>
      <span class="text-red-500 font-bold text-lg"
        >{{ incomeToDelete.title }}</span
      >

      <div class="flex gap-4 w-full justify-center">
        <button
          class="px-6 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition font-semibold"
          (click)="deleteConfirm()"
        >
          Yes, Delete
        </button>
        <button
          class="px-6 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition font-semibold"
          (click)="incomeToDelete = null"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
  } @if(incomeToEdit){
  <div
    class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm"
  >
    <!-- Form Container -->
    <div
      class="bg-white w-[90%] max-w-lg rounded-2xl shadow-xl p-6 relative animate-fadeIn"
    >
      <!-- Close Button -->
      <button
        class="absolute top-3 right-3 text-gray-500 hover:text-gray-700"
        (click)="closeForm()"
      >
        ‚úñ
      </button>

      <!-- Form -->
      <form
        #IncomeForm="ngForm"
        (ngSubmit)="editIncomeConfirmed()"
        class="flex flex-col gap-4"
      >
        <h3 class="text-2xl font-bold text-gray-800 mb-2">Edit Income</h3>

        <!-- Title -->
        <div class="flex flex-col">
          <label for="title" class="font-semibold text-sm text-gray-600"
            >Title</label
          >
          <input
            type="text"
            name="Title"
            [(ngModel)]="incomeToEdit.title"
            placeholder="Enter Title"
            required
            class="rounded-lg border border-gray-300 p-2 focus:ring-2 focus:ring-purple-500 focus:outline-none"
          />
        </div>

        <!-- Amount -->
        <div class="flex flex-col">
          <label for="amount" class="font-semibold text-sm text-gray-600"
            >Amount</label
          >
          <input
            type="number"
            name="Amount"
            [(ngModel)]="incomeToEdit.amount"
            placeholder="Enter Amount"
            required
            class="rounded-lg border border-gray-300 p-2 focus:ring-2 focus:ring-purple-500 focus:outline-none"
          />
        </div>

        <div class="flex flex-col">
          <label for="description" class="font-semibold text-sm text-gray-600"
            >description</label
          >
          <input
            type="text"
            name="Description"
            [(ngModel)]="incomeToEdit.description"
            placeholder="Enter description"
            required
            class="rounded-lg border border-gray-300 p-2 focus:ring-2 focus:ring-purple-500 focus:outline-none"
          />
        </div>
        <!-- Submit -->
        <button
          type="submit"
          class="w-full py-2 rounded-lg bg-purple-600 hover:bg-purple-700 transition text-white font-semibold shadow-md focus:ring-2 focus:ring-purple-500"
        >
          Save Expense
        </button>
      </form>
    </div>
  </div>
  }
</div>
